{"version":3,"sources":["blocks/handlers/state.handler.ts"],"names":[],"mappings":";;;;IAKA,sBAA6B,UAAU,EAAE,MAAM,EAAE,eAAe,EAAE,UAAU,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,OAAO,EACzH,IAAI,EAAE,SAAS;QACf,MAAM,CAAC;YACH,UAAU,EAAE,UAAU;SACzB,CAAC;QAEF;YACI,UAAU,CAAC,OAAO,GAAG,uBAAO,CAAC;YAE7B,IAAI,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,mBAAmB,EAAE,UAAU,KAAK,EAAE,OAAO,EAAE,aAAa,EAAE,SAAS;gBACzG,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC;gBAC7B,UAAU,CAAC,aAAa,GAAG,aAAa,CAAC;gBACzC,UAAU,CAAC,SAAS,GAAG,SAAS,CAAC;gBAEjC,yFAAyF;gBACzF,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACnB,KAAK,CAAC,cAAc,EAAE,CAAC;oBACvB,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;gBACvC,CAAC;gBAED,EAAE,CAAC,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;oBACjC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACrB,CAAC;gBAGD,sBAAsB;gBACtB,kBAAkB,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,UAAU,QAAQ;oBACnD,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAC7B,CAAC,CAAC,CAAC;YAEP,CAAC,CAAC,CAAC;YAEH,IAAI,kBAAkB,GAAG,UAAU,CAAC,GAAG,CAAC,qBAAqB,EAAG,UAAS,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU;gBACpH,IAAI,QAAQ,GAAG,cAAc,CAAE;gBAE/B,2EAA2E;gBAC3E,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACzB,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC;gBACtC,CAAC;gBACD,kBAAkB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC7C,CAAC,CAAC,CAAC;YAEH,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE;gBACvB,EAAE,CAAA,CAAC,OAAO,CAAC,SAAS,CAAC,gBAAgB,CAAC,IAAI,gBAAgB,KAAK,IAAI,CAAC,CAAA,CAAC;oBACjE,gBAAgB,EAAE,CAAC;gBACvB,CAAC;gBACD,EAAE,CAAA,CAAC,OAAO,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,kBAAkB,KAAK,IAAI,CAAC,CAAA,CAAC;oBACrE,kBAAkB,EAAE,CAAC;gBACzB,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IAnDD,uCAmDC,CAAA;;;;;;;YAtDD,YAAY,CAAC,OAAO,GAAG,CAAC,YAAY,EAAE,QAAQ,EAAE,iBAAiB,EAAE,YAAY,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,SAAS;gBAC9H,MAAM,EAAE,WAAW,CAAC,CAAC","file":"blocks/handlers/state.handler.js","sourcesContent":["import { VERSION } from '../../app.constants';\n\nStateHandler.$inject = ['$rootScope', '$state', '$sessionStorage', '$translate', 'JhiLanguageService', 'TranslationHandler', '$window',\n        'Auth', 'Principal'];\n\nexport function StateHandler($rootScope, $state, $sessionStorage, $translate, JhiLanguageService, TranslationHandler, $window,\n    Auth, Principal) {\n    return {\n        initialize: initialize\n    };\n\n    function initialize() {\n        $rootScope.VERSION = VERSION;\n\n        var stateChangeStart = $rootScope.$on('$stateChangeStart', function (event, toState, toStateParams, fromState) {\n            $rootScope.toState = toState;\n            $rootScope.toStateParams = toStateParams;\n            $rootScope.fromState = fromState;\n\n            // Redirect to a state with an external URL (http://stackoverflow.com/a/30221248/1098564)\n            if (toState.external) {\n                event.preventDefault();\n                $window.open(toState.url, '_self');\n            }\n\n            if (Principal.isIdentityResolved()) {\n                Auth.authorize();\n            }\n\n            \n            // Update the language\n            JhiLanguageService.getCurrent().then(function (language) {\n                $translate.use(language);\n            });\n            \n        });\n\n        var stateChangeSuccess = $rootScope.$on('$stateChangeSuccess',  function(event, toState, toParams, fromState, fromParams) {\n            var titleKey = 'global.title' ;\n\n            // Set the page title key to the one configured in state or use default one\n            if (toState.data.pageTitle) {\n                titleKey = toState.data.pageTitle;\n            }\n            TranslationHandler.updateTitle(titleKey);\n        });\n\n        $rootScope.$on('$destroy', function () {\n            if(angular.isDefined(stateChangeStart) && stateChangeStart !== null){\n                stateChangeStart();\n            }\n            if(angular.isDefined(stateChangeSuccess) && stateChangeSuccess !== null){\n                stateChangeSuccess();\n            }\n        });\n    }\n}\n"],"sourceRoot":"/source/"}
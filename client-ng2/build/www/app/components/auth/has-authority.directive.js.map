{"version":3,"sources":["components/auth/has-authority.directive.ts"],"names":[],"mappings":"AAAA,CAAC;IACG,YAAY,CAAC;IAEb,OAAO;SACF,MAAM,CAAC,oBAAoB,CAAC;SAC5B,SAAS,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;IAE7C,YAAY,CAAC,OAAO,GAAG,CAAC,WAAW,CAAC,CAAC;IAErC,sBAAsB,SAAS;QAC3B,IAAI,SAAS,GAAG;YACZ,QAAQ,EAAE,GAAG;YACb,IAAI,EAAE,QAAQ;SACjB,CAAC;QAEF,MAAM,CAAC,SAAS,CAAC;QAEjB,kBAAkB,KAAK,EAAE,OAAO,EAAE,KAAK;YACnC,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;YAEvD,IAAI,UAAU,GAAG;gBACT,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAClC,CAAC,EACD,SAAS,GAAG;gBACR,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAC/B,CAAC,EACD,gBAAgB,GAAG,UAAU,KAAK;gBAE9B,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBACR,UAAU,EAAE,CAAC;gBACjB,CAAC;gBAED,SAAS,CAAC,YAAY,CAAC,SAAS,CAAC;qBAC5B,IAAI,CAAC,UAAU,MAAM;oBAClB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBACT,UAAU,EAAE,CAAC;oBACjB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACJ,SAAS,EAAE,CAAC;oBAChB,CAAC;gBACL,CAAC,CAAC,CAAC;YACX,CAAC,CAAC;YAEN,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvB,gBAAgB,CAAC,IAAI,CAAC,CAAC;gBAEvB,KAAK,CAAC,MAAM,CAAC;oBACT,MAAM,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;gBACvC,CAAC,EAAE;oBACC,gBAAgB,CAAC,IAAI,CAAC,CAAC;gBAC3B,CAAC,CAAC,CAAC;YACP,CAAC;QACL,CAAC;IACL,CAAC;AACL,CAAC,CAAC,EAAE,CAAC","file":"components/auth/has-authority.directive.js","sourcesContent":["(function() {\n    'use strict';\n\n    angular\n        .module('uaaSetupApp.common')\n        .directive('hasAuthority', hasAuthority);\n\n    hasAuthority.$inject = ['Principal'];\n\n    function hasAuthority(Principal) {\n        var directive = {\n            restrict: 'A',\n            link: linkFunc\n        };\n\n        return directive;\n\n        function linkFunc(scope, element, attrs) {\n            var authority = attrs.hasAuthority.replace(/\\s+/g, '');\n\n            var setVisible = function () {\n                    element.removeClass('hidden');\n                },\n                setHidden = function () {\n                    element.addClass('hidden');\n                },\n                defineVisibility = function (reset) {\n\n                    if (reset) {\n                        setVisible();\n                    }\n\n                    Principal.hasAuthority(authority)\n                        .then(function (result) {\n                            if (result) {\n                                setVisible();\n                            } else {\n                                setHidden();\n                            }\n                        });\n                };\n\n            if (authority.length > 0) {\n                defineVisibility(true);\n\n                scope.$watch(function() {\n                    return Principal.isAuthenticated();\n                }, function() {\n                    defineVisibility(true);\n                });\n            }\n        }\n    }\n})();\n"],"sourceRoot":"/source/"}
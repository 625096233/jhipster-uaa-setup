{"version":3,"sources":["admin/audits/audits.component.ts"],"names":[],"mappings":"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","file":"admin/audits/audits.component.js","sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { DatePipe } from \"@angular/common\";\n\nimport { Audit } from \"./audit.model\";\nimport { AuditsService } from \"./audits.service\";\nimport { ParseLinks } from \"../../components/util/parse-links.service\";\n\n@Component({\n  selector: 'jhi-audit',\n  templateUrl: 'app/admin/audits/audits.component.html'\n})\nexport class AuditsComponent implements OnInit {\n    audits: Audit[];\n    fromDate: string;\n    links: any;\n    page: number;\n    orderProp: string;\n    reverse: boolean;\n    toDate: string;\n    totalItems: number;\n\n    constructor(private auditsService: AuditsService, private parseLinks: ParseLinks){Â \n        this.page = 1;\n        this.reverse = false;\n        this.orderProp = \"timestamp\";\n    }\n\n    getAudits () {\n        return this.sortAudits(this.audits);\n    }\n\n    loadPage (page: number) {\n        this.page = page;\n        this.onChangeDate();\n    }\n\n    ngOnInit() {\n        this.today();\n        this.previousMonth();\n        this.onChangeDate();\n    }\n\n    onChangeDate () {\n        this.auditsService.query({page: this.page - 1, size: 20, fromDate: this.fromDate, toDate: this.toDate}).subscribe(res => {\n            this.audits = res.json();\n            this.links = this.parseLinks.parse(res.headers.get('link'));\n            console.log(this.audits);\n            this.totalItems = + res.headers.get('X-Total-Count');\n        });\n    }\n\n    previousMonth () {\n        let dateFormat:string = 'yyyy-MM-dd';\n        let fromDate: Date = new Date();\n\n        if (fromDate.getMonth() === 0) {\n            fromDate = new Date(fromDate.getFullYear() - 1, 11, fromDate.getDate());\n        } else {\n            fromDate = new Date(fromDate.getFullYear(), fromDate.getMonth() - 1, fromDate.getDate());\n        }\n\n        this.fromDate = new DatePipe().transform(fromDate, dateFormat);\n    }\n\n    today () {\n        let dateFormat:string = 'yyyy-MM-dd';\n        // Today + 1 day - needed if the current day must be included\n        let today: Date = new Date();\n\n        let date = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);\n        this.toDate = new DatePipe().transform(date, dateFormat);\n    }\n\n    private sortAudits(audits: Audit[]) {\n        audits = audits.slice(0).sort((a, b) => {\n            if (a[this.orderProp] < b[this.orderProp]) {\n                return -1;\n            } else if ([b[this.orderProp] < a[this.orderProp]]) {\n                return 1;\n            } else {\n                return 0;\n            }\n        });\n\n        if(this.reverse) audits.reverse();\n\n        return audits;\n    }\n}\n"],"sourceRoot":"/source/"}
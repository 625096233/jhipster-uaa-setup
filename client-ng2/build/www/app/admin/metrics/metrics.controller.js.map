{"version":3,"sources":["admin/metrics/metrics.controller.ts"],"names":[],"mappings":";;;IAEA,wCAAgD,MAAM,EAAE,iBAAiB,EAAE,SAAS;QAChF,IAAI,EAAE,GAAG,IAAI,CAAC;QAEd,EAAE,CAAC,WAAW,GAAG,EAAE,CAAC;QACpB,EAAE,CAAC,OAAO,GAAG,EAAE,CAAC;QAChB,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC;QACrB,EAAE,CAAC,qBAAqB,GAAG,qBAAqB,CAAC;QACjD,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;QACtB,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC;QAE1B,EAAE,CAAC,OAAO,EAAE,CAAC;QAEb,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,UAAU,QAAQ;YAC1C,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;YACtB,EAAE,CAAC,WAAW,GAAG,EAAE,CAAC;YACpB,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,UAAU,KAAK,EAAE,GAAG;gBACjD,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClE,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;gBAClC,CAAC;gBACD,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7C,sBAAsB;oBACtB,IAAI,KAAK,GAAG,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;oBACjC,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;oBAElC,8BAA8B;oBAC9B,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;oBAChC,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG;wBACrB,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;wBAChC,OAAO,EAAE,KAAK;qBACjB,CAAC;gBACN,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH;YACI,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC;YAC1B,iBAAiB,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,UAAU,OAAO;gBACjD,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC;gBACrB,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;YAC/B,CAAC,EAAE,UAAU,OAAO;gBAChB,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC;gBAC1B,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;YAC/B,CAAC,CAAC,CAAC;QACP,CAAC;QAED;YACI,iBAAiB,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,UAAS,IAAI;gBAC7C,SAAS,CAAC,IAAI,CAAC;oBACX,WAAW,EAAE,sCAAsC;oBACnD,UAAU,EAAE,qCAAqC;oBACjD,YAAY,EAAE,IAAI;oBAClB,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE;wBACL,UAAU,EAAE;4BACR,MAAM,CAAC,IAAI,CAAC;wBAChB,CAAC;qBAEJ;iBACJ,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QACP,CAAC;IAGL,CAAC;IA/DD,2EA+DC,CAAA;;;;YAjED,8BAA8B,CAAC,OAAO,GAAG,CAAC,QAAQ,EAAC,mBAAmB,EAAE,WAAW,CAAC,CAAC","file":"admin/metrics/metrics.controller.js","sourcesContent":["JhiMetricsMonitoringController.$inject = ['$scope','JhiMetricsService', '$uibModal'];\n\nexport function JhiMetricsMonitoringController ($scope, JhiMetricsService, $uibModal) {\n    var vm = this;\n\n    vm.cachesStats = {};\n    vm.metrics = {};\n    vm.refresh = refresh;\n    vm.refreshThreadDumpData = refreshThreadDumpData;\n    vm.servicesStats = {};\n    vm.updatingMetrics = true;\n\n    vm.refresh();\n\n    $scope.$watch('vm.metrics', function (newValue) {\n        vm.servicesStats = {};\n        vm.cachesStats = {};\n        angular.forEach(newValue.timers, function (value, key) {\n            if (key.indexOf('web.rest') !== -1 || key.indexOf('service') !== -1) {\n                vm.servicesStats[key] = value;\n            }\n            if (key.indexOf('net.sf.ehcache.Cache') !== -1) {\n                // remove gets or puts\n                var index = key.lastIndexOf('.');\n                var newKey = key.substr(0, index);\n\n                // Keep the name of the domain\n                index = newKey.lastIndexOf('.');\n                vm.cachesStats[newKey] = {\n                    'name': newKey.substr(index + 1),\n                    'value': value\n                };\n            }\n        });\n    });\n\n    function refresh () {\n        vm.updatingMetrics = true;\n        JhiMetricsService.getMetrics().then(function (promise) {\n            vm.metrics = promise;\n            vm.updatingMetrics = false;\n        }, function (promise) {\n            vm.metrics = promise.data;\n            vm.updatingMetrics = false;\n        });\n    }\n\n    function refreshThreadDumpData () {\n        JhiMetricsService.threadDump().then(function(data) {\n            $uibModal.open({\n                templateUrl: 'app/admin/metrics/metrics.modal.html',\n                controller: 'JhiMetricsMonitoringModalController',\n                controllerAs: 'vm',\n                size: 'lg',\n                resolve: {\n                    threadDump: function() {\n                        return data;\n                    }\n\n                }\n            });\n        });\n    }\n\n\n}\n"],"sourceRoot":"/source/"}